<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git 使用规范 | Bwton Tech Docs</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/0.styles.dfbb38ae.css" as="style"><link rel="preload" href="/assets/js/app.6925f991.js" as="script"><link rel="preload" href="/assets/js/2.185ba8fe.js" as="script"><link rel="preload" href="/assets/js/9.0296b6c4.js" as="script"><link rel="prefetch" href="/assets/js/10.b4346211.js"><link rel="prefetch" href="/assets/js/11.4de65b1b.js"><link rel="prefetch" href="/assets/js/12.9b0d40cd.js"><link rel="prefetch" href="/assets/js/13.be970c90.js"><link rel="prefetch" href="/assets/js/3.20aef773.js"><link rel="prefetch" href="/assets/js/4.b8e0b9f6.js"><link rel="prefetch" href="/assets/js/5.46afb74b.js"><link rel="prefetch" href="/assets/js/6.d221489e.js"><link rel="prefetch" href="/assets/js/7.3e6e25f2.js"><link rel="prefetch" href="/assets/js/8.075ebba8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dfbb38ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Bwton Tech Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/git/" class="nav-link router-link-active">Git</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/git/" class="nav-link router-link-active">Git</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/git/" class="sidebar-heading clickable router-link-active open"><span>git 践行</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/git/git-use-standard.html" class="active sidebar-link">Git 使用规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_0-我们可能面临的问题" class="sidebar-link">0. 我们可能面临的问题</a></li><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_1-git-规范的必要性" class="sidebar-link">1. Git 规范的必要性</a></li><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_2-分支管理规范" class="sidebar-link">2. 分支管理规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_2-1-分支说明和操作" class="sidebar-link">2.1 分支说明和操作</a></li><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_2-2-分支间操作注意事项" class="sidebar-link">2.2 分支间操作注意事项</a></li><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_2-3-项目分支操作流程示例" class="sidebar-link">2.3 项目分支操作流程示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_3-提交信息规范" class="sidebar-link">3. 提交信息规范</a></li><li class="sidebar-sub-header"><a href="/git/git-use-standard.html#_4-参考资料" class="sidebar-link">4. 参考资料</a></li></ul></li><li><a href="/git/bwton-git.html" class="sidebar-link">Bwton GitFlow</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git-使用规范"><a href="#git-使用规范" aria-hidden="true" class="header-anchor">#</a> Git 使用规范</h1> <p>祖师爷 Linus 在创造了伟大的 Linux 之后，又创造了应用最广泛的代码管理工具 —— Git，极大地提高了程序员的生产力。
现如今大部分项目都在使用 Git 作为代码管理工具，不论是在代码管理、版本控制以及团队协作上，Git 相比其他版本控制软件都有着无可比拟的优势。</p> <p>虽然 Git 是个优秀的工具，但是在项目中是否能够正确合理地使用，是否能够发挥其最大的优势，就我自己这几年的工作经历来看，对于大部分团队这个问题的答案是否定的。</p> <p>大部分程序员对 Git 的使用基本上都停留在 <code>git add</code>、<code>git commit</code>、<code>git push</code>、<code>git pull</code> 这几个指令上，而且大部分团队也没有 Git 规范，提交信息充斥着大量的 “fix”、“update”，分支管理也很混乱，代码提交哪个分支上也没具体的规定，导致在团队协作过程中经常出现代码合并后谁的代码不见了，修过的 bug 在新版本又出现了……</p> <h2 id="_0-我们可能面临的问题"><a href="#_0-我们可能面临的问题" aria-hidden="true" class="header-anchor">#</a> 0. 我们可能面临的问题</h2> <p>试想遇到以下这些问题，你会采取怎样的方式去解决：</p> <ul><li>需要线上某个历史版本的源码，直接在 develop 分支根据提交记录和时间找对应的节点？</li> <li>线上版本出现严重 bug 需要紧急修复发版本，而你的项目就一个分支，上个版本发布之后已经有大量改动了，怎么办？</li> <li>某个提交改动了部分代码，涉及到 10 几个文件，现在这个改动不需要了，此时要一个个找出这些文件然后再改回去么？</li> <li>出现了一个 bug，之前好像处理过，但是现在忘了当初怎么处理的了，在一堆写着 “fix bug”、“update” 的提交记录中，如何找到当初那笔的提交？</li> <li>某个功能本来准备发布的，现在突然决定这个版本不上了，现在要一处处找到之前的代码，然后再改回去？</li> <li>……</li></ul> <p>以上这些问题在我们的项目中都是会或多或少出现的，部分问题可能涉及到的是对 Git 的功能是否熟悉的问题，大部分问题则是涉及到一个项目的 Git 使用规范问题，如果有一个很好的规范，在项目中合理地使用 Git，很多问题压根就不是问题。</p> <h2 id="_1-git-规范的必要性"><a href="#_1-git-规范的必要性" aria-hidden="true" class="header-anchor">#</a> 1. Git 规范的必要性</h2> <p>既然认同需要一份 Git 规范，那么这个规范需要规范哪些内容，解决哪些问题，又带来哪些好处呢？个人认为有以下几点：</p> <p><strong>1. 分支管理</strong></p> <ul><li>代码提交在应该提交的分支</li> <li>随时可以切换到线上稳定版本代码</li> <li>多个版本的开发工作同时进行</li></ul> <p><strong>2. 提交记录的可读性</strong></p> <ul><li>准确的提交描述，具备可检索性</li> <li>合理的提交范围，避免一个功能就一笔提交</li> <li>分支间的合并保有提交历史，且合并后结果清晰明了</li> <li>避免出现过多的分叉</li></ul> <p><strong>3. 团队协作</strong></p> <ul><li>明确每个分支的功用，做到对应的分支执行对应的操作</li> <li>合理的提交，每次提交有明确的改动范围和规范的提交信息</li> <li>使用 Git 管理版本迭代、紧急线上 bug fix、功能开发等任务</li></ul> <p>以上就是一份 Git 规范的作用和使命。</p> <p>接下来结合 Git-Flow 和个人实际的项目经验，总结了一份项目中使用 Git 的规范，其中大部分内容都是对 Git-Flow 进行一个解读和扩展，告诉大家为什么这么做以及怎么做。
这里也推荐一下 Git-Flow 相关的内容：</p> <blockquote><p><a href="https://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener noreferrer">A successful Git branching model » nvie.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>这是一份 2010 年提出来的分支管理规范，距今已过去 8 年了，但是其工作流程至今还是适用的，也衍生出很多优秀的开发流程。</p> <p>以下就是 Git-Flow 的经典流程图：</p> <p><img src="https://jaeger.itscoder.com/img/postimg/git-flow.png" alt=""></p> <p>如果你熟悉 Git-Flow，那么你对上图中的各种分支和线应该都能够理解，如果你之前没了解过相关的知识，那你可能会有点懵，不过在读完本文之后再看这张图，应该就能够理解了。</p> <h2 id="_2-分支管理规范"><a href="#_2-分支管理规范" aria-hidden="true" class="header-anchor">#</a> 2. 分支管理规范</h2> <h3 id="_2-1-分支说明和操作"><a href="#_2-1-分支说明和操作" aria-hidden="true" class="header-anchor">#</a> 2.1 分支说明和操作</h3> <p><strong>master 分支</strong></p> <ul><li>主分支，永远处于稳定状态，对应当前线上版本</li> <li>以 tag 标记一个版本，因此在 master 分支上看到的每一个 tag 都应该对应一个线上版本</li> <li>不允许在该分支直接提交代码</li></ul> <p><strong>develop 分支</strong></p> <ul><li>开发分支，包含了项目最新的功能和代码，所有开发都依赖 develop 分支进行</li> <li>小的改动可以直接在 develop 分支进行，改动较多时切出新的 feature 分支进行</li></ul> <p><strong>注：</strong> 更好的做法是 develop 分支作为开发的主分支，也不允许直接提交代码。小改动也应该以 feature 分支提 merge request 合并，目的是保证每个改动都经过了强制代码 review，降低代码风险</p> <p><strong>feature 分支</strong></p> <ul><li>功能分支，开发新功能的分支</li> <li>开发新的功能或者改动较大的调整，从 develop 分支切换出 feature 分支，分支名称为 <code>feature/xxx</code></li> <li>开发完成后合并回 develop 分支并且删除该 feature/xxx 分支</li></ul> <p><strong>release 分支</strong></p> <ul><li>发布分支，新功能合并到 develop 分支，准备发布新版本时使用的分支</li> <li>当 develop 分支完成功能合并和部分 bug fix，准备发布新版本时，切出一个 release 分支，来做发布前的准备，分支名约定为<code>release/xxx</code></li> <li>发布之前发现的 bug 就直接在这个分支上修复，确定准备发版本就合并到 master 分支，完成发布，同时合并到 develop 分支</li></ul> <p><strong>hotfix 分支</strong></p> <ul><li>紧急修复线上 bug 分支</li> <li>当线上版本出现 bug 时，从 master 分支切出一个 <code>hotfix/xxx</code> 分支，完成 bug 修复，然后将 <code>hotfix/xxx</code> 合并到 master 和 develop 分支(如果此时存在 release 分支，则应该合并到 release 分支)，合并完成后删除该 <code>hotfix/xxx</code> 分支</li></ul> <p>以上就是在项目中应该出现的分支以及每个分支功能的说明。
其中稳定长期存在的分支只有 master 和 develop 分支，别的分支在完成对应的使命之后都会合并到这两个分支然后被删除。简单总结如下：</p> <ul><li>master 分支: 线上稳定版本分支</li> <li>develop 分支: 开发分支，衍生出 feature 分支和 release 分支</li> <li>release 分支: 发布分支，准备待发布版本的分支，存在多个，版本发布之后删除</li> <li>feature 分支: 功能分支，完成特定功能开发的分支，存在多个，功能合并之后删除</li> <li>hotfix 分支: 紧急热修复分支，存在多个，紧急版本发布之后删除</li></ul> <h3 id="_2-2-分支间操作注意事项"><a href="#_2-2-分支间操作注意事项" aria-hidden="true" class="header-anchor">#</a> 2.2 分支间操作注意事项</h3> <p>在团队开发过程中，避免不了和其他人一起协作， 同时也会遇到合并分支等一些操作，这里提交 2 个个人觉得比较好的分支操作规范。</p> <p><strong>同一分支 <code>git pull</code> 使用 rebase</strong></p> <p>首先看一张图：</p> <p><img src="https://jaeger.itscoder.com/img/postimg/git_pull_no_rebase.jpg" alt=""></p> <p>看到这样的  提交线图，想从中看出一条清晰的提交线几乎是不可能的，充满了 <code>Merge remote-tracking branch 'origin/xxx' into xxx</code> 这样的提交记录，同时也将提交线弄成了交错纵横的图，没有了可读性。</p> <p>这里最大的原因就是因为默认的 <code>git pull</code> 使用的是 merge 行为，当你更新代码时，如果本地存在未推送到远程的提交，就会产生一个这样的 merge 提交记录。因此在同一个分支上更新代码时推荐使用 <code>git pull --rebase</code>。</p> <p>下面这张图展示了默认的 <code>git pull</code> 和 <code>git pull --rebase</code> 的结果差异，使用 <code>git pull --rebase</code> 目的是修整提交线图，使其形成一条直线。
<img src="/img/postimg/git_pull_rebase_diff.jpg" alt=""></p> <p>默认的 <code>git pull</code> 行为是 merge，可以进行如下设置修改默认的 <code>git pull</code> 行为：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>    <span class="token comment"># 为某个分支单独设置，这里是设置 dev 分支</span>
    git config branch<span class="token punctuation">.</span>dev<span class="token punctuation">.</span>rebase <span class="token boolean">true</span><span class="token comment"># 全局设置,所有的分支 git pull 均使用 --rebase</span>
    git config <span class="token comment">--global pull.rebase true</span>
    git config <span class="token comment">--global branch.autoSetupRebase always</span>
</code></pre></div><p>这里需要说明一下，在我看来使用 <code>git pull --rebase</code> 操作是比较好的，能够得到一条很清晰的提交直线图，方便查看提交记录和 code review，但是由于 rebase 会改变提交历史，也存在一些不好的影响。这里就不做过多的讨论了，有兴趣的话可以移步知乎上的讨论：<a href="https://www.zhihu.com/question/36509119" target="_blank" rel="noopener noreferrer">在开发过程中使用 git rebase 还是 git merge，优缺点分别是什么？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>分支合并使用 <code>--no-ff</code></strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token comment"># 例如当前在 develop 分支,需要合并 feature/xxx 分支</span>
  git <span class="token keyword">merge</span> <span class="token comment">--no-ff feature/xxx</span>
</code></pre></div><p>在解释这个命令之前，先解释下 Git 中的 fast-forward：<br>
举例来说，开发一直在 <code>develop</code> 分支进行，此时有个新功能需要开发，新建一个 <code>feature/a</code> 分支，并在其上进行一系列开发和提交。当完成功能开发时，此时回到 <code>develop</code> 分支，此时 <code>develop</code> 分支在创建 <code>feature/a</code> 分支之后没有产生任何的 commit，那么此时的合并就叫做 fast-forward。</p> <p>fast-forward 合并的结果如下图所示，这种 merge 的结果就是一条直线了，无法明确看到切出一个新的 feature 分支，并完成了一个新的功能开发，因此此时比较推荐使用 <code>git merge --no-ff</code>，得到的结果就很明确知道，新的一系列提交是完成了一个新的功能，如果需要对这个功能进行 code review，那么只需要检视叉的那条线上的提交即可。</p> <p><img src="https://jaeger.itscoder.com/img/postimg/git_pull_rebase_diff.jpg" alt=""></p> <p>关于以上两个分支间的操作建议，如果需要了解更多，可以阅读<a href="http://hungyuhei.github.io/2012/08/07/better-git-commit-graph-using-pull---rebase-and-merge---no-ff.html" target="_blank" rel="noopener noreferrer">洁癖者用 Git：pull --rebase 和 merge --no-ff<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这篇文章。</p> <h3 id="_2-3-项目分支操作流程示例"><a href="#_2-3-项目分支操作流程示例" aria-hidden="true" class="header-anchor">#</a> 2.3 项目分支操作流程示例</h3> <p>这部分内容结合日常项目的开发流程，涉及到开发新功能、分支合并、发布新版本以及发布紧急修复版本等操作，展示常用的命令和操作。</p> <ol><li>切到 develop 分支，更新 develop 最新代码</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>git checkout develop
git pull <span class="token comment">--rebase</span>
</code></pre></div><ol start="2"><li>新建 feature 分支，开发新功能</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>git checkout <span class="token operator">-</span>b feature<span class="token operator">/</span>xxx
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
git <span class="token keyword">add</span> <span class="token operator">&lt;</span>files<span class="token operator">&gt;</span>
git <span class="token keyword">commit</span> <span class="token operator">-</span>m<span class="token string">&quot;feat(xxx): commit a&quot;</span>
git <span class="token keyword">commit</span> <span class="token operator">-</span>m<span class="token string">&quot;feat(xxx): commit b&quot;</span><span class="token comment"># 其他提交</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>如果此时 develop 分支有一笔提交，影响到你的 feature 开发，可以 rebase develop 分支，前提是 该 feature 分支只有你自己一个在开发，如果多人都在该分支，需要进行协调：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>    <span class="token comment"># 切换到 develop 分支并更新 develop 分支代码</span>
    git checkout develop
    git pull <span class="token comment">--rebase# 切回 feature 分支</span>
    git checkout feature<span class="token operator">/</span>xxx
    git rebase develop
    
    <span class="token comment"># 如果需要提交到远端，且之前已经提交到远端，此时需要强推(强推需慎重！)</span>
    git push <span class="token comment">--force</span>
</code></pre></div><p>上述场景也可以通过 <code>git cherry-pick</code> 来实现，有兴趣的可以去了解一下这个指令。</p> <ol start="3"><li>完成 feature 分支，合并到 develop 分支</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>    <span class="token comment"># 切到 develop 分支，更新下代码</span>
    git <span class="token keyword">check</span> develop
    git pull <span class="token comment">--rebase# 合并 feature 分支</span>
    git <span class="token keyword">merge</span> feature<span class="token operator">/</span>xxx <span class="token comment">--no-ff# 删除 feature 分支</span>
    git branch <span class="token operator">-</span>d feature<span class="token operator">/</span>xxx
    
    <span class="token comment"># 推到远端</span>
    git push origin develop
</code></pre></div><ol start="4"><li>当某个版本所有的 feature 分支均合并到 develop 分支，就可以切出 release 分支，准备发布新版本，提交测试并进行 bug fix</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>    <span class="token comment"># 当前在 develop 分支</span>
    git checkout <span class="token operator">-</span>b <span class="token keyword">release</span><span class="token operator">/</span>xxx
    
    <span class="token comment"># 在 release/xxx 分支进行 bug fix</span>
    git <span class="token keyword">commit</span> <span class="token operator">-</span>m<span class="token string">&quot;fix(xxx): xxxxx&quot;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><ol start="5"><li>所有 bug 修复完成，准备发布新版本</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>    <span class="token comment"># master 分支合并 release 分支并添加 tag</span>
    git checkout master
    git <span class="token keyword">merge</span> <span class="token comment">--no-ff release/xxx --no-ff# 添加版本标记，这里可以使用版本发布日期或者具体的版本号</span>
    git tag <span class="token number">1.0</span><span class="token number">.0</span>
    
    <span class="token comment"># develop 分支合并 release 分支</span>
    git checkout develop
    git <span class="token keyword">merge</span> <span class="token comment">--no-ff release/xxx</span>
    
    <span class="token comment"># 删除 release 分支</span>
    git branch <span class="token operator">-</span>d <span class="token keyword">release</span><span class="token operator">/</span>xxx
</code></pre></div><p>至此，一个新版本发布完成。</p> <ol start="6"><li>线上出现 bug，需要紧急发布修复版本</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code>    <span class="token comment"># 当前在 master 分支</span>
    git checkout master
    
    <span class="token comment"># 切出 hotfix 分支</span>
    git checkout <span class="token operator">-</span>b hotfix<span class="token operator">/</span>xxx
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 进行 bug fix 提交
    
    <span class="token comment"># master 分支合并 hotfix 分支并添加 tag(紧急版本)</span>
    git checkout master
    git <span class="token keyword">merge</span> <span class="token comment">--no-ff hotfix/xxx --no-ff# 添加版本标记，这里可以使用版本发布日期或者具体的版本号</span>
    git tag <span class="token number">1.0</span><span class="token number">.1</span>
    
    <span class="token comment"># develop 分支合并 hotfix 分支(如果此时存在 release 分支的话，应当合并到 release 分支)</span>
    git checkout develop
    git <span class="token keyword">merge</span> <span class="token comment">--no-ff hotfix/xxx</span>
    
    <span class="token comment"># 删除 hotfix 分支</span>
    git branch <span class="token operator">-</span>d hotfix<span class="token operator">/</span>xxx

</code></pre></div><p>至此，紧急版本发布完成。</p> <h2 id="_3-提交信息规范"><a href="#_3-提交信息规范" aria-hidden="true" class="header-anchor">#</a> 3. 提交信息规范</h2> <p>提交信息规范部分参考 <a href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#commits" target="_blank" rel="noopener noreferrer">Angular.js commit messgae<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>git commit 格式 如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token operator">&lt;</span><span class="token keyword">type</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span><span class="token punctuation">)</span>: <span class="token operator">&lt;</span>subject<span class="token operator">&gt;</span>
</code></pre></div><p>各个部分的说明如下：</p> <ul><li></li></ul> <p><strong>type 类型，提交的类别</strong></p> <ul><li><strong>feat</strong>: 新功能</li> <li><strong>fix</strong>: 修复 bug</li> <li><strong>docs</strong>: 文档变动</li> <li><strong>style</strong>: 格式调整，对代码实际运行没有改动，例如添加空行、格式化等</li> <li><strong>refactor</strong>: bug 修复和添加新功能之外的代码改动</li> <li><strong>perf</strong>: 提升性能的改动</li> <li><strong>test</strong>: 添加或修正测试代码</li> <li><strong>chore</strong>: 构建过程或辅助工具和库（如文档生成）的更改</li></ul> <p><strong>scope 修改范围</strong></p> <p>主要是这次修改涉及到的部分，简单概括，例如 login、train-order</p> <p><strong>subject 修改的描述</strong></p> <p>具体的修改描述信息</p> <p><strong>范例</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code>    feat<span class="token punctuation">(</span>detail<span class="token punctuation">)</span>: 详情页修改样式
    fix<span class="token punctuation">(</span>login<span class="token punctuation">)</span>: 登录页面错误处理
    test<span class="token punctuation">(</span>list<span class="token punctuation">)</span>: 列表页添加测试代码
</code></pre></div><p>这里对提交规范加几点说明：</p> <ol><li><code>type + scope</code> 能够控制每笔提交改动的文件尽可能少且集中，避免一次很多文件改动或者多个改动合成一笔。</li> <li><code>subject</code> 对于大部分国内项目而已，如果团队整体英文不是较高水平，比较推荐使用中文，方便阅读和检索。</li> <li>避免重复的提交信息，如果发现上一笔提交没改完整，可以使用 <code>git commit --amend</code> 指令追加改动，尽量避免重复的提交信息。</li></ol> <h2 id="_4-参考资料"><a href="#_4-参考资料" aria-hidden="true" class="header-anchor">#</a> 4. 参考资料</h2> <ul><li><a href="https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#commits" target="_blank" rel="noopener noreferrer">Angular.js commit messgae<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://git-scm.com/book/zh/v1" target="_blank" rel="noopener noreferrer">Git - Book<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener noreferrer">A successful Git branching model » nvie.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>oh-my-zsh 中的 git 插件，git 命令简写 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugin:git" target="_blank" rel="noopener noreferrer">Plugin:git · robbyrussell/oh-my-zsh Wiki<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://gist.github.com/yesmeck/4245406" target="_blank" rel="noopener noreferrer">Git 开发流程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/git/bwton-git.html">
          Bwton GitFlow
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6925f991.js" defer></script><script src="/assets/js/2.185ba8fe.js" defer></script><script src="/assets/js/9.0296b6c4.js" defer></script>
  </body>
</html>
